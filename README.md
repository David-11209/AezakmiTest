# AezakmiTest
Документация по использованию приложения:

При входе в приложение открывается экран с вариантами авторизации и регистрация - LoginMethodsView
Функционал: 
1. Переход на экран авторизации
2. Переход на экран регистрации
3. Вход через Google: выполняется метод signInWithGoogle в AuthorizationViewModel, после успешной авторизации будет переход на главный экран - MainView

Экран авторизации - SignInView
Функционал:
1. TextField и SecureField для ввода логина и пароля, после нажатия на кнопку «Войти» происходит проверка на валидацию и если проверка пройдена, то идет запрос к FireBase на авторизацию
2. Если пользователя с таким логином или паролем нет, появится alert
3.  По кнопке «Восстановить пароль» отображается sheet. В нем есть TextField куда нужно ввести email, по кнопке «Продолжить» будет отправлен запрос к FireBase на восстановление пароля через ссылку в письме которое будет отправлено на почту 
4. После успешной авторизации будет переход на главный экран - MainView

Экран регистрации - SignUpView
Функционал:
1. TextField и SecureField для ввода логина и пароля, после нажатия на кнопку «Войти» происходит проверка на валидацию и если проверка пройдена, то идет запрос к FireBase на уникальность email
2. Если email не уникален появится alert
3. После успешной регистрации будет переход на главный экран - MainView

Главный экран - MainView
Функционал:
1. При попадании на экран MainView, происходит запрос к FireBase на проверку подтверждения почты пользователя. 
2. Если почта не подтверждена то появится alert и на экране будет кнопка «Подтвердить почту» которая отобразит sheet с EmailVerificationView
3. На экране есть две кнопки «Выбрать фото из галереи» по нажатию на которую откроется ImagePickerView и кнопка «Сделать фото» по нажатию на которую отобразится камера
4. После того как пользователь сделал или выбрал фото произойдет переход на EditingMenuView

Экран подтверждения почты - EmailVerificationView
Функционал:
1. По нажатию на кнопку «продолжить» выполняется запрос к FireBase для отправки письма с ссылкой на почту пользователя, по нажатию на ссылку пользователь подтвердит email.

Экран EditingMenuView
Функционал:
1. Переход на экран рисования на изображении - PhotoDrawingView
2. Переход на экран добавления текста на изображение - TextEditingView
3. Переход на экран выбора фильтра для изображения - ImageFilterView


Экран рисования на изображении - PhotoDrawingView
Функционал:
1. По центру находится выбранное изображение, на котором можно рисовать, изображение можно масштабировать и крутить.
2. Снизу экрана находится toolPicker 
3. Справа сверху на экране находится toolBar - ToolbarComponent, с кнопками сохранения изображения в галерею и отправки изображения

Экран добавления текста на изображение - TextEditingView
Функционал:
1. По центру находится выбранное изображение, на которое можно добавлять текст.
2. Справа сверху на экране находится toolBar - ToolbarComponent, с кнопками добавления нового текста, сохранения изображения в галерею и отправки изображения
3. При добавлении нового текста открывается TextEditingFooter, он содержит TextField, кнопку выбора цвета, кнопку изменения шрифта, кнопку добавления и кнопку отмены.
4. По долгому нажатию на текст который находится на картинке появляется TextEditingFooter для редактирования выбранного текста

Экран добавления фильтра на картинку - ImageFilterView
1. По центру находится выбранное изображение, на которое можно добавлять фильтр.
2. Три кнопки с фильтрами, по нажатию на кнопку фильтр применяется к изображению
3. Кнопка сохранения изображения в галерею


Краткое описание архитектуры: 

Для экранов авторизации, регистрации и подтверждения email используется AuthorizationViewModel. В ней находятся методы для взаимодействия с FireBase. 
Методы
1. Вход через Google - signInWithGoogle
2. Вход через Email - signInWithEmail
3. Проверка уникальности Email - isEmailUnique
4. Регистрация - signUpWithEmail
5. Восстановление пароля - resetPassword
6. Отправка письма для верификации - sendEmailVerification
7. Проверка того что пользователь подтвердил почту - checkEmailVerification

Для экранов с редактированием изображения используется ImageEditingViewModel - это viewModel  . 
Методы
1. Логика сохранения и отправки изображения - метод exportImage. 
2. Отмена редактирования с режимом «рисование» - cancelImageEditing
3. Отмена редактирования  с режимом «добавление текста» - cancelTextView

Для экрана с добавлением фильтра на картинку используется ImageFilterViewModel 
Методы 
1. Получение всех фильтров - availableFilters
2. Добавления фильтра на картинку - applyFilter
3. Сохранение в галерею - saveImageToGallery

Для экранов с рисованием на изображении и добавлением текста на изображение я использовал  UIViewRepresentable с  PKCanvasView.
